{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createCard = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `<li class='image-item'>\n    <div class='card-wrapper'>\n      <div class='image-wrapper'>\n        <a class='card-link' href=${largeImageURL}>\n          <img src=${webformatURL} alt='${tags}'>\n        </a>\n      </div>\n      <div class='card-content'>\n        <ul class='stats-list'>\n          <li class='stats-item'><div><span>Likes</span><span>${likes}</span></div></li>\n          <li class='stats-item'><div><span>Views</span><span>${views}</span></div></li>\n          <li class='stats-item'><div><span>Comments</span><span>${comments}</span></div></li>\n          <li class='stats-item'><div><span>Downloads</span><span>${downloads}</span></div></li>\n        </ul>\n      </div>\n    </div>\n  </li>`;\n};\n\nexport const appendCards = (ulElem, cards) => {\n  ulElem.insertAdjacentHTML('beforeend', cards);\n};\n\nconst loaderRef = document.querySelector('.loader');\n\nexport function showLoader() {\n  loaderRef.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loaderRef.style.display = 'none';\n}\n\nexport function scrollPage() {\n  const elem = document.querySelector(\".image-item\");\n  const rect = elem.getBoundingClientRect();\n  window.scrollBy({top: rect.width*2, behavior: 'smooth'});\n}","import { showLoader } from './render-functions';\nimport axios from 'axios';\n\nconst url = 'https://pixabay.com/api/';\n\nexport default async function getImages(query, page, limit) {\n  const params = {\n    key: '47568770-df67670bdc8e06478abf0c27f',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    q: query,\n    page,\n    per_page: limit\n  };\n  showLoader();\n  const result = await axios.get(url, {params});\n  return result.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImages from './js/pixabay-api';\nimport {\n  createCard,\n  appendCards,\n  hideLoader,\n  scrollPage,\n} from './js/render-functions';\n\nconst formRef = document.querySelector('.search-form');\nconst ulElemRef = document.querySelector('.images-list');\nconst loadMoreBtnRef = document.querySelector('.load-more-btn');\nconst infoTextRef = document.querySelector('.info');\n\nlet page = 1;\nlet query = '';\nconst limit = 15;\n\nformRef.addEventListener('submit', e => handleSubmit(e));\nloadMoreBtnRef.addEventListener('click', handleClick);\n\nfunction handleSubmit(e) {\n  e.preventDefault();\n\n  if (!e.target.search.value.trim()) {\n    iziToast.show({\n      title: 'Warning',\n      message: 'Please fill the field!',\n      position: 'topRight',\n      color: 'red',\n    });\n    return;\n  }\n\n  if (e.target.search.value.trim() !== query) {\n    page = 1;\n    loadMoreBtnRef.style.display = 'none';\n  }\n\n  ulElemRef.innerHTML = '';\n\n  query = e.target.search.value.trim().split(' ').join('+');\n\n  getImages(query, page, limit)\n    .then(result => {\n      if (result.hits.length) {\n        const cards = result.hits.map(hit => createCard(hit)).join('');\n        appendCards(ulElemRef, cards);\n        gallery.refresh();\n        page++;\n        loadMoreBtnRef.style.display = 'block';\n      } else {\n        iziToast.show({\n          title: 'Warning',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          color: 'yellow',\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.show({\n        title: 'Error',\n        message: 'Sorry, trouble happend. Please try again later!',\n        position: 'topRight',\n        color: 'red',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction handleClick() {\n  getImages(query, page, limit)\n    .then(result => {\n      if (result.hits.length) {\n        const cards = result.hits.map(hit => createCard(hit)).join('');\n        appendCards(ulElemRef, cards);\n        gallery.refresh();\n        page++;\n        scrollPage();\n      }\n      if (page > getTotalPages(result.totalHits)) {\n        infoTextRef.style.display = 'block';\n        loadMoreBtnRef.style.display = 'none';\n      }\n    })\n    .catch(error => {\n      iziToast.show({\n        title: 'Error',\n        message: 'Sorry, trouble happend. Please try again later!',\n        position: 'topRight',\n        color: 'red',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction getTotalPages(totalHits) {\n  return Math.ceil(totalHits / limit);\n}\n\nlet gallery = new SimpleLightbox('.card-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\ngallery.on('show.simplelightbox');\n"],"names":["createCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","appendCards","ulElem","cards","loaderRef","showLoader","hideLoader","scrollPage","rect","url","getImages","query","page","limit","params","axios","formRef","ulElemRef","loadMoreBtnRef","infoTextRef","handleSubmit","handleClick","iziToast","result","hit","gallery","error","getTotalPages","totalHits","SimpleLightbox"],"mappings":"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"}